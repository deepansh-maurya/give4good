import{a as g,r as l,j as e,c as f}from"./index-Bm7inwCK.js";const k=()=>{var n,c;const d=g(),[t,v]=l.useState(d.state.campaign),[m,j]=l.useState(Math.floor((t==null?void 0:t.progress)/(t==null?void 0:t.goal)*100)),[w,u]=l.useState(!0),[s,o]=l.useState({name:"",email:"",contact:"",amount:""});async function h(){const a=await f(t._id);u(a)}l.useEffect(()=>{h()},[]);async function x(){let a=localStorage.getItem("token"),r=await fetch("http://localhost:3000/api/v1/get-payment-key",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});r=await r.json();const i=await(await fetch("http://localhost:3000/api/v1/create-order",{method:"post",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},cache:"no-cache",body:JSON.stringify({details:{amount:s.amount*100,id:t.creator,campaignID:t._id}})})).json();console.log(i);var p={key:r,amount:s.amount*100,currency:"INR",name:"Give4Good",description:"Test Transaction",image:"https://avatars.githubusercontent.com/u/147298285?s=96&v=4",order_id:i.order.id,callback_url:`http://localhost:3000/api/v1/payment-verification/${t.creator}/${t._id}/${localStorage.getItem("token")}`,prefill:{name:s.name,email:s.email,contact:s.contact},notes:{address:"Razorpay Corporate Office"},theme:{color:"#3399cc"}},b=new window.Razorpay(p);b.open()}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex bg-white relative top-14 text-black",children:[e.jsxs("div",{className:"w-2/3 p-8",children:[e.jsx("h1",{className:"text-5xl text-center shadow-sm shadow-black  font-bold mb-7",children:(n=t==null?void 0:t.title)==null?void 0:n.toUpperCase()}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"bg-gray-300 h-4 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-gray-800  border-black h-full",children:e.jsx("div",{className:` h-full bg-red-500  w-[${m}%]`})})}),e.jsxs("div",{className:"flex justify-between mt-2 shadow-sm shadow-black p-2",children:[e.jsxs("div",{className:"text-sm",children:["Total Donors - ",(c=t==null?void 0:t.donors)==null?void 0:c.length]}),e.jsxs("div",{className:"text-sm ",children:["Progress ₹",t.progress/100||0," / Goal ₹",t.goal]})]})]}),e.jsx("div",{className:"mb-4"}),e.jsx("img",{src:t.image,alt:"",className:"w-full mb-4  object-cover "}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-2xl font-bold mt-8 mb-7",children:"DECRIPTION"}),e.jsx("div",{className:"bg-gray-300 p-5 italic h-auto w-full rounded-lg",children:t.description}),e.jsx("div",{className:"text-2xl font-bold mt-8",children:"STORY"}),e.jsx("textarea",{readOnly:!0,className:"bg-gray-300  italic mt-6 h-[1000px] p-7 w-full rounded-lg",children:t.story})]}),e.jsxs("div",{className:"flex gap-10 relative  flex-col justify-between",children:[e.jsxs("div",{className:"bg-gray-300 gap-9 flex-col  flex justify-center items-center p-5 h-auto w-auto rounded-lg",children:[e.jsx("textarea",{className:"bg-white space-y-3 p-7   w-[500px] h-[200px] rounded-lg",name:"",id:"",placeholder:"Your words "}),e.jsx("button",{className:"bg-black font-bold text-white px-4 py-2 rounded w-3/5",children:"Comment"})]}),e.jsx("div",{className:"bg-red-600 text-white font-extrabold cursor-pointer flex justify-center items-center h-12 w-2/5 rounded-full",children:"Report"})]})]}),e.jsxs("div",{className:"w-1/3 p-8 fixed right-0  flex flex-col justify-center gap-4  h-screen  bg-black",children:[e.jsx("div",{className:"mb-4",children:e.jsx("button",{className:" bg-blue-400 w-2/3 font-bold rounded-full relative left-16   text-white px-4 py-2  mr-2",children:"Share"})}),e.jsxs("div",{className:"mb-4 relative flex  gap-7    mx-auto",children:[e.jsx("button",{onClick:a=>o({...s,amount:1001}),className:"hover:bg-red-400 focus:bg-red-500 hover:text-white text-black bg-white px-4 py-2 font-bold rounded mr-2",children:"1001"}),e.jsx("button",{onClick:a=>o({...s,amount:3001}),className:"hover:bg-red-400 hover:text-white focus:bg-red-500 text-black px-4 bg-white py-2 font-bold rounded mr-2",children:"3001"}),e.jsx("button",{onClick:a=>o({...s,amount:5001}),className:"hover:bg-red-400 hover:text-white text-black px-4 focus:bg-red-500 bg-white py-2 font-bold rounded mr-2  ",children:"5001"})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{onChange:a=>o({...s,amount:a.target.value>"a"&&a.target.value<"z"?null:Number(a.target.value)}),type:"text",placeholder:"Enter amount",value:s.amount,className:"bg-gray-800 focus:bg-white focus:text-black text-white px-4 py-2 rounded w-full"})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{onChange:a=>o({...s,name:a.target.value}),type:"text",placeholder:"Your name",className:"bg-gray-800 focus:bg-white focus:text-black text-white px-4 py-2 rounded w-full",value:s.name})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{value:s.email,onChange:a=>o({...s,email:a.target.value}),type:"email",placeholder:"Your email",className:"bg-gray-800 focus:bg-white focus:text-black text-white px-4 py-2 rounded w-full"})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",value:s.contact,onChange:a=>o({...s,contact:a.target.value}),placeholder:"Your Contact",className:"bg-gray-800 focus:bg-white focus:text-black text-white px-4 py-2 rounded w-full"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("button",{onClick:x,className:"bg-green-500 font-bold text-white px-4 py-2 rounded w-full",children:"Donate Now"}),e.jsx("div",{onClick:()=>o({name:"",email:"",contact:"",amount:""}),className:" underline text-blue-600",children:"reset"})]}),e.jsx("div",{className:"mb-4"}),e.jsx("div",{})]})]})})};export{k as default};
